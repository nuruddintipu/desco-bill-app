<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yearly DESCO Postpaid Bills</title>
    <link rel="stylesheet" href="styles.css">

</head>
<body>

<header class="header">
    <h1>Yearly <img src="images/desco-logo.png" alt="DESCO Logo"> Postpaid Bills</h1>
</header>

<section class="form-section">

    <div class="form-group">
        <label for="month">Month</label>
        <input id="month" placeholder="January"/>
        <div id="months-dropdown-results" class="months-dropdown-results">
            <div id="months-dropdown-rs" class="months-dropdown-rs"></div>
        </div>
    </div>

    <div class="form-group">
        <label for="year">Year</label>
        <input id="year" placeholder="2024"/>
        <div id="year-dropdown-results" class="year-dropdown-results">
            <div id="year-dropdown-rs" class="year-dropdown-rs"></div>
        </div>
    </div>
    <div class="form-group">
        <label for="biller">Biller No</label>
        <input type="text" id="biller" placeholder="e.g., 27773">

    </div>
</section>
<div class="button-container">
    <button>Fetch Bills</button>
</div>

<section class="summary-section">
    <p id="bill-summary-heading">Electricity Usage and Bill Summary</p>
    <div class="charts">
        <!-- Placeholder for charts -->
        <div class="chart" id="electricity-usage"></div>
        <div class="chart" id="total-bill"></div>
    </div>
</section>

<footer>
    Designed and Developed by Saiful Islam
</footer>

<script>
    // Array of month and year values for dropdown data
    var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    var years = ["2024", "2023", "2022", "2021", "2020", "2019", "2018", "2017", "2016", "2015", "2014", "2013", "2012", "2011", "2010"];

    // Initialize dropdowns for month and year inputs
    initializeDropdown('month', 'months-dropdown-rs', months);
    initializeDropdown('year', 'year-dropdown-rs', years);

    // Function to initialize a dropdown for a specific input and dataset
    function initializeDropdown (inputId, dropdownId, dataArray) {
        var inputField = document.getElementById(inputId); // Input field reference
        var dropdown = document.getElementById(dropdownId); // Dropdown container reference

        // Show full dropdown when input field is focused
        inputField.addEventListener('focus', function () {
            updateDropdown(""); // Show all items initially
        });

        // Hide dropdown shortly after losing focus
        inputField.addEventListener('blur', function () {
            setTimeout(function () {
                dropdown.style.display = 'none';
            }, 200);
        });

        // Update dropdown items based on current input
        inputField.addEventListener('input', function () {
            updateDropdown(inputField.value);
        });

        // Function to update dropdown based on search string
        function updateDropdown (searchString) {
            dropdown.style.display = 'block'; // Make dropdown visible
            searchString = searchString.toLowerCase(); // Convert search string to lowercase
            dropdown.innerHTML = ""; // Clear existing items
            var isExist = false; // Flag to check if any result found

            // Loop through dataArray and match items with search string
            for(var i = 0; i < dataArray.length; i++) {
                if(dataArray[i].toLowerCase().includes(searchString)) {
                    const item = document.createElement('div'); // Create dropdown item
                    item.textContent = dataArray[i]; // Set item text
                    item.classList.add('dropdown-item'); // Add class for styling

                    // Attach click event to update input field with selected item
                    item.addEventListener('click', function() {
                        onClickListItem(item);
                    });
                    dropdown.appendChild(item); // Add item to dropdown
                    isExist = true;
                }
            }

            // Display message if no matching result is found
            if(!isExist) {
                dropdown.innerHTML = "No result found.";
            }
        }

        // Function to set input field value and hide dropdown on item selection
        function onClickListItem (dataItem) {
            inputField.value = dataItem.innerText; // Set selected value to input
            dropdown.style.display = 'none'; // Hide dropdown
        }
    }
</script>

</body>
</html>
