<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yearly DESCO Postpaid Bills</title>
    <link rel="stylesheet" href="styles.css">

</head>
<body>

<header class="header">
    <h1>Yearly <img src="images/desco-logo.png" alt="DESCO Logo"> Postpaid Bills</h1>
</header>

<section class="form-section">

    <div class="form-group">
        <label for="month">Month</label>
        <input id="month" placeholder="e.g., January">
        <div id="dropdown-results" class="dropdown-results">
            <div id="dropdown-rs" class="dropdown-rs"></div>
        </div>
    </div>

    <div class="form-group">
        <label for="year">Year</label>
        <select id="year" placeholder="2023">
            <option>2024</option><option>2023</option><option>2022</option>
            <option>2021</option><option>2020</option><option>2019</option>
            <option>2018</option><option>2017</option><option>2016</option>
            <option>2015</option><option>2014</option><option>2013</option>
        </select>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const monthSelect = new Choices('#year', {
                searchEnabled: true, // Enables the search box
                itemSelectText: '', // Removes "Press to select" text
                placeholder: true, // Enables placeholder
                placeholderValue: '' // Placeholder text
            });
        });
    </script>

    <div class="form-group">
        <label for="biller">Biller No</label>
        <input type="text" id="biller" placeholder="e.g., 27773">

    </div>
</section>
<div class="button-container">
    <button>Fetch Bills</button>
</div>

<section class="summary-section">
    <p id="bill-summary-heading">Electricity Usage and Bill Summary</p>
    <div class="charts">
        <!-- Placeholder for charts -->
        <div class="chart" id="electricity-usage"></div>
        <div class="chart" id="total-bill"></div>
    </div>
</section>

<footer>
    Designed and Developed by Saiful Islam
</footer>

<script>
    var billerInput = document.getElementById('month');
    var dropdown = document.getElementById('dropdown-rs');

    var months = ["January", "February", "March", "April", "May",
        "June", "July", "August", "September", "October", "November", "December"];

    billerInput.addEventListener('focus', function () {
        updateDropdown("");
    });

    billerInput.addEventListener('blur', function () {
        setTimeout(function () {
            dropdown.style.display = 'none';
        }, 200);
    });
    billerInput.addEventListener('input', function () {
            updateDropdown(billerInput.value) ;
        }
    );
    function updateDropdown (searchString) {
        dropdown.style.display = 'block';
        searchString = searchString.toLowerCase();
        dropdown.innerHTML = "";
        var isExist = false;
        for(var i=0; i<months.length; i++){
            if(months[i].toLowerCase().includes(searchString)){
                const item = document.createElement('div');
                item.textContent = months[i];
                item.classList.add('dropdown-item');
                item.setAttribute('id', 'month-'+i);
                item.setAttribute('onclick', 'onClickMonthItem('+i+')');
                dropdown.appendChild(item);

                isExist = true;
            }
        }
        if(!isExist){
            dropdown.innerHTML = "No result found.";
        }
    }
    function onClickMonthItem (monthNumber){
        let mItem = document.getElementById('month-'+monthNumber);
        console.log(mItem);
        billerInput.value = mItem.innerText;
        dropdown.style.display = 'none'; // Hide dropdown after selection
    }

</script>
</body>
</html>
